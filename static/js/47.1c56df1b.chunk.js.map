{"version":3,"file":"static/js/47.1c56df1b.chunk.js","mappings":"uNAAaA,EAAe,SAAAC,GAAK,OAAIA,EAAMC,UAAUC,IAApB,EACpBC,EAA4B,SAAAH,GAAK,OAAIA,EAAMC,UAAUG,YAApB,E,mGCIjCC,EAAcC,EAAAA,QAAAA,GAAH,yQAmBXC,EAAQD,EAAAA,QAAAA,IAAH,6M,oBCoGlB,EAvGkB,WAChBE,QAAQC,IACN,kBACAC,EAAAA,EAAAA,SAAAA,QAAAA,OAAAA,eAEF,IAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAkBC,EAAAA,EAAAA,IAAYf,GAC9BK,GAAeU,EAAAA,EAAAA,IAAYX,GAEjC,GAA8BY,EAAAA,EAAAA,UAAS,IAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAAkCF,EAAAA,EAAAA,WAAS,GAA3C,eAAOG,EAAP,KAAkBC,EAAlB,KAEA,GAA0BJ,EAAAA,EAAAA,UAAS,GAAnC,eAAOK,EAAP,KAAcC,EAAd,KACA,GAAwCN,EAAAA,EAAAA,UAAS,CAAC,EAAG,IAArD,eAAOO,EAAP,KAAqBC,EAArB,KACMC,GAAUC,EAAAA,EAAAA,MAEVC,GADaC,EAAAA,EAAAA,MAAXC,OACYC,OAAO,GAC3B,GAAoCd,EAAAA,EAAAA,WAAUW,GAA9C,eAAOI,EAAP,KAAmBC,EAAnB,MAGAC,EAAAA,EAAAA,YAAU,WACRrB,GAASsB,EAAAA,EAAAA,OACThB,EAAWJ,EAEZ,GAAE,CAACF,KAEJqB,EAAAA,EAAAA,YAAU,WACRf,EAAWJ,GACXQ,EAASR,EAAgBqB,OAC1B,GAAE,CAACrB,KAEJmB,EAAAA,EAAAA,YAAU,WACRb,EAAaf,EACd,GAAE,CAACA,IAwBJ,OAjBA4B,EAAAA,EAAAA,YAAU,WAIJF,GAAc,GAChBC,EAAc,GAGZX,EA9BU,IA8BUM,EAAO,GAC7BK,EAAcX,EA/BF,GAkCdI,EAAQ,SAAD,OAAUM,IACjBP,EAAgB,CAnCF,EAmCGO,EAAuB,EAnC1B,EAmC6BA,GAE5C,GAAE,CAACN,EAASM,EAAYV,KAGvB,SAACb,EAAD,UACGW,GACC,SAACiB,EAAA,EAAD,KAEA,UAACC,EAAA,EAAD,YACE,SAACC,EAAA,EAAD,wBACCxB,GAAmBA,EAAgBqB,OAAS,GAC3C,SAAC7B,EAAD,UACGW,EAAQa,MAAR,MAAAb,GAAO,OAAUM,IAAcgB,KAAI,SAAAC,GAAW,IAAD,QAC5C,OACE,yBACE,SAACC,EAAA,EAAD,CACEC,SAAS,WACTC,GAAIH,EAAOI,IACXC,IAAG,UAAEL,EAAOM,aAAT,QAAkBD,EACrBE,MAAK,UAAEP,EAAOO,aAAT,QAAkB,UACvBC,MACE,8CACGR,EAAOS,aADV,QAEIT,EAAOU,mBAFX,QAGI,mBAGNC,KAAMX,EAAOW,KAAP,UAAiBX,EAAOW,KAAxB,QAAqC,MAbtCX,EAAOI,IAiBnB,OAGH,SAACQ,EAAA,EAAD,CAAkBJ,KAAK,oEAExB/B,GAAWA,EAAQkB,OAAS,IAC3B,SAACkB,EAAA,EAAD,CACEC,MAAOC,KAAKC,KAAKnC,EA1Eb,GA2EJM,KAAMI,EACN0B,aA3DS,SAACC,EAAOC,GAC3B3B,EAAc2B,IACdC,EAAAA,EAAAA,IACD,QA+DF,C","sources":["redux/favorites/favoritesSelectors.js","pages/Favorites/Favorites.styled.jsx","pages/Favorites/Favorites.jsx"],"sourcesContent":["export const getFavorites = state => state.favorites.data;\nexport const getFavoritesRefreshStatus = state => state.favorites.isRefreshing;\n","import styled from 'styled-components';\n\nimport img from '../../images/default.jpg';\n\nexport { img };\nexport const RecipesList = styled.ul`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n\n  & li {\n    width: 100%;\n  }\n\n  @media screen and (min-width: 768px) {\n    gap: 40px;\n  }\n\n  @media screen and (min-width: 1440px) {\n    gap: 50px;\n  }\n`;\n\nexport const Thumb = styled.div`\n  padding-bottom: 100px;\n\n  @media screen and (min-width: 768px) {\n    padding-bottom: 200px;\n  }\n\n  @media screen and (min-width: 1440px) {\n    padding-bottom: 100px;\n  }\n`;\n","import { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchFavorites } from 'redux/favorites/favoritesOperation';\nimport {\n  getFavorites,\n  getFavoritesRefreshStatus,\n} from 'redux/favorites/favoritesSelectors';\n\nimport { Container } from '../../components/Container/Container';\nimport { Title } from 'components/Title/Title';\nimport { RecipesItem } from 'components/RecipesItem/RecipesItem';\nimport { EmptyPlaceholder } from 'pages/EmptyPlaceholder/EmptyPlaceholder';\nimport { Loader } from 'components/Loader/Loader';\nimport { Paginator } from 'components/Pagination/Paginator';\n\nimport { scrollToTop } from 'utils/scrollUp';\nimport { RecipesList, Thumb, img } from './Favorites.styled';\nimport { axiosInstance } from 'service/API/axios';\n\nconst Favorites = () => {\n  console.log(\n    'axios headers: ',\n    axiosInstance.defaults.headers.common.Authorization\n  );\n  const dispatch = useDispatch();\n  const storageFavorite = useSelector(getFavorites);\n  const isRefreshing = useSelector(getFavoritesRefreshStatus);\n\n  const [recipes, setRecipes] = useState([]);\n  const [isLoading, setisLoading] = useState(false);\n\n  const [total, setTotal] = useState(0);\n  const [currentSlice, setcurrentSlice] = useState([0, 4]);\n  const history = useNavigate();\n  const { search } = useLocation();\n  const page = search.slice(-1);\n  const [pageNumber, setPageNumber] = useState(+page);\n  const perPage = 4;\n\n  useEffect(() => {\n    dispatch(fetchFavorites());\n    setRecipes(storageFavorite);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dispatch]);\n\n  useEffect(() => {\n    setRecipes(storageFavorite);\n    setTotal(storageFavorite.length);\n  }, [storageFavorite]);\n\n  useEffect(() => {\n    setisLoading(isRefreshing);\n  }, [isRefreshing]);\n\n  const handleChange = (event, value) => {\n    setPageNumber(value);\n    scrollToTop();\n  };\n\n  useEffect(() => {\n    // if (pageNumber <= 0 || pageNumber > Math.ceil(total / perPage)) {\n    //   setPageNumber(1);\n    // }\n    if (pageNumber <= 0) {\n      setPageNumber(1);\n    }\n\n    if (total / perPage === page - 1) {\n      setPageNumber(total / perPage);\n    }\n\n    history(`?page=${pageNumber}`);\n    setcurrentSlice([pageNumber * perPage - 4, pageNumber * perPage]);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [history, pageNumber, total]);\n\n  return (\n    <Thumb>\n      {isLoading ? (\n        <Loader />\n      ) : (\n        <Container>\n          <Title>Favorites</Title>\n          {storageFavorite && storageFavorite.length > 0 ? (\n            <RecipesList>\n              {recipes.slice(...currentSlice).map(recipe => {\n                return (\n                  <li key={recipe._id}>\n                    <RecipesItem\n                      ViewMode=\"favorite\"\n                      id={recipe._id}\n                      img={recipe.thumb ?? img}\n                      title={recipe.title ?? 'No name'}\n                      text={\n                        <span>\n                          {recipe.about ??\n                            recipe.description ??\n                            'No description'}\n                        </span>\n                      }\n                      time={recipe.time ? `${recipe.time} min` : ''}\n                    />\n                  </li>\n                );\n              })}\n            </RecipesList>\n          ) : (\n            <EmptyPlaceholder text=\"You currently don't have any own recipes added. Let's add some!\" />\n          )}\n          {recipes && recipes.length > 0 && (\n            <Paginator\n              count={Math.ceil(total / perPage)}\n              page={pageNumber}\n              handleChange={handleChange}\n            />\n          )}\n        </Container>\n      )}\n    </Thumb>\n  );\n};\n\nexport default Favorites;\n"],"names":["getFavorites","state","favorites","data","getFavoritesRefreshStatus","isRefreshing","RecipesList","styled","Thumb","console","log","axiosInstance","dispatch","useDispatch","storageFavorite","useSelector","useState","recipes","setRecipes","isLoading","setisLoading","total","setTotal","currentSlice","setcurrentSlice","history","useNavigate","page","useLocation","search","slice","pageNumber","setPageNumber","useEffect","fetchFavorites","length","Loader","Container","Title","map","recipe","RecipesItem","ViewMode","id","_id","img","thumb","title","text","about","description","time","EmptyPlaceholder","Paginator","count","Math","ceil","handleChange","event","value","scrollToTop"],"sourceRoot":""}